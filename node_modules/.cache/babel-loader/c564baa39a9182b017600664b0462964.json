{"ast":null,"code":"import _slicedToArray from\"/Users/computingyard/Documents/OLX-Mern-stack-main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useSelector}from\"react-redux\";import Card from\"../card/card\";import\"./usersdetailes.scss\";import{Row}from\"react-bootstrap\";import{Col}from\"react-bootstrap\";import{Toast}from\"react-bootstrap\";import{useState}from\"react\";import{Button}from\"react-bootstrap\";import firebase from\"firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Userdeatailes=function Userdeatailes(){var _Object$values,_Object$values2,_Object$values2$filte,_Object$entries,_Object$entries$filte,_productsdetailed$fil;var name=useSelector(function(state){var _state$user;return(_state$user=state.user)===null||_state$user===void 0?void 0:_state$user.name;});var productsdetailed=useSelector(function(state){return state.productsdetailed;});var userlength=useSelector(function(state){return state.user;});console.log(userlength._id,\"user iddd\");var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _onClose=function onClose(id,buyer){setShow(false);if((buyer===null||buyer===void 0?void 0:buyer.count)>0){buyer.count-=1;}buyer.read=false;firebase.database().ref(\"productsdetailed/\"+id+\"/buy/\").set(buyer).then(function(){alert(\"seller read your message\");}).catch(function(){alert(\"something went wrong\");});};var count=((_Object$values=Object.values(productsdetailed))===null||_Object$values===void 0?void 0:_Object$values.length)?(_Object$values2=Object.values(productsdetailed))===null||_Object$values2===void 0?void 0:(_Object$values2$filte=_Object$values2.filter(function(item){var _item$buy;return(item===null||item===void 0?void 0:item.userID)===(userlength===null||userlength===void 0?void 0:userlength.uid)&&(item===null||item===void 0?void 0:(_item$buy=item.buy)===null||_item$buy===void 0?void 0:_item$buy.read);}))===null||_Object$values2$filte===void 0?void 0:_Object$values2$filte.reduce(function(total,current){var _current$buy;return total+=(current===null||current===void 0?void 0:(_current$buy=current.buy)===null||_current$buy===void 0?void 0:_current$buy.count)||0;},0):0;console.log(count,\"count batao bhau\");return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"name-button\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{children:name})}),/*#__PURE__*/_jsx(\"div\",{className:\"toast-user\",children:/*#__PURE__*/_jsxs(Row,{children:[(_Object$entries=Object.entries(productsdetailed))===null||_Object$entries===void 0?void 0:(_Object$entries$filte=_Object$entries.filter(function(item){var _item$,_item$2,_item$2$buy;return((_item$=item[1])===null||_item$===void 0?void 0:_item$.userID)===(userlength===null||userlength===void 0?void 0:userlength.uid)&&((_item$2=item[1])===null||_item$2===void 0?void 0:(_item$2$buy=_item$2.buy)===null||_item$2$buy===void 0?void 0:_item$2$buy.read);}))===null||_Object$entries$filte===void 0?void 0:_Object$entries$filte.map(function(item,index){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsxs(Toast,{onClose:function onClose(){var _item$3;return _onClose(item[0],(_item$3=item[1])===null||_item$3===void 0?void 0:_item$3.buy);},show:show,delay:3000,children:[/*#__PURE__*/_jsxs(Toast.Header,{children:[/*#__PURE__*/_jsx(\"img\",{src:\"holder.js/20x20?text=%20\",className:\"rounded mr-2\",alt:\"\"}),/*#__PURE__*/_jsx(\"strong\",{className:\"mr-auto\",children:\"Bootstrap\"}),/*#__PURE__*/_jsx(\"small\",{children:\"11 mins ago\"})]}),/*#__PURE__*/_jsx(Toast.Body,{children:\"Woohoo, you're reading this text in a Toast!\"})]})})});}),/*#__PURE__*/_jsxs(Col,{className:\"notificatio\",xs:6,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"counter\",children:[count,\" \"]}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setShow(true);},children:\"Notification \"})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"carddiv\",children:[console.log(productsdetailed,userlength,\" asgjk\"),Array.isArray(productsdetailed)&&(productsdetailed===null||productsdetailed===void 0?void 0:(_productsdetailed$fil=productsdetailed.filter(function(item){return(item===null||item===void 0?void 0:item.userID)===(userlength===null||userlength===void 0?void 0:userlength._id);}))===null||_productsdetailed$fil===void 0?void 0:_productsdetailed$fil.map(function(item,index){console.log(item,\"kiya mil raha hai\");return/*#__PURE__*/_jsx(Card,{item:item,id:item===null||item===void 0?void 0:item._id,index:index,showCloseIcon:true,buyer:item===null||item===void 0?void 0:item.buy});}))]})]});};export default Userdeatailes;","map":{"version":3,"sources":["/Users/computingyard/Documents/OLX-Mern-stack-main/frontend/src/components/userdetailes/userdetailes.js"],"names":["useSelector","Card","Row","Col","Toast","useState","Button","firebase","Userdeatailes","name","state","user","productsdetailed","userlength","console","log","_id","show","setShow","onClose","id","buyer","count","read","database","ref","set","then","alert","catch","Object","values","length","filter","item","userID","uid","buy","reduce","total","current","entries","map","index","Array","isArray"],"mappings":"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","sourcesContent":["import { useSelector } from \"react-redux\";\nimport Card from \"../card/card\";\nimport \"./usersdetailes.scss\";\nimport { Row } from \"react-bootstrap\";\nimport { Col } from \"react-bootstrap\";\nimport { Toast } from \"react-bootstrap\";\nimport { useState } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport firebase from \"firebase\";\n\nlet Userdeatailes = () => {\n  let name = useSelector((state) => state.user?.name);\n  let productsdetailed = useSelector((state) => state.productsdetailed);\n  const userlength = useSelector((state) => state.user);\n  console.log(userlength._id, \"user iddd\");\n  const [show, setShow] = useState(false);\n  const onClose = (id, buyer) => {\n    setShow(false);\n    if (buyer?.count > 0) {\n      buyer.count -= 1;\n    }\n    buyer.read = false;\n    firebase\n      .database()\n      .ref(\"productsdetailed/\" + id + \"/buy/\")\n      .set(buyer)\n      .then(() => {\n        alert(\"seller read your message\");\n      })\n      .catch(() => {\n        alert(\"something went wrong\");\n      });\n  };\n  let count = Object.values(productsdetailed)?.length\n    ? Object.values(productsdetailed)\n        ?.filter((item) => item?.userID === userlength?.uid && item?.buy?.read)\n        ?.reduce((total, current) => (total += current?.buy?.count || 0), 0)\n    : 0;\n  console.log(count, \"count batao bhau\");\n  return (\n    <>\n      <div className=\"name-button\">\n        <div>\n          <button>{name}</button>\n        </div>\n        <div className=\"toast-user\">\n          <Row>\n            {Object.entries(productsdetailed)\n              ?.filter(\n                (item) =>\n                  item[1]?.userID === userlength?.uid && item[1]?.buy?.read\n              )\n              ?.map((item, index) => (\n                <>\n                  <Col xs={6}>\n                    <Toast\n                      onClose={() => onClose(item[0], item[1]?.buy)}\n                      show={show}\n                      delay={3000}\n                    >\n                      <Toast.Header>\n                        <img\n                          src=\"holder.js/20x20?text=%20\"\n                          className=\"rounded mr-2\"\n                          alt=\"\"\n                        />\n                        <strong className=\"mr-auto\">Bootstrap</strong>\n                        <small>11 mins ago</small>\n                      </Toast.Header>\n                      <Toast.Body>\n                        Woohoo, you're reading this text in a Toast!\n                      </Toast.Body>\n                    </Toast>\n                  </Col>\n                </>\n              ))}\n            <Col className=\"notificatio\" xs={6}>\n              <div className=\"counter\">{count} </div>\n              <Button onClick={() => setShow(true)}>Notification </Button>\n            </Col>\n          </Row>\n        </div>\n      </div>\n      <div className=\"carddiv\">\n        {console.log(productsdetailed, userlength, \" asgjk\")}\n        {Array.isArray(productsdetailed) && (productsdetailed)\n          ?.filter((item) => item?.userID === userlength?._id)\n          ?.map((item, index) => {\n            console.log(item, \"kiya mil raha hai\");\n            return (\n              <Card\n                item={item}\n                id={item?._id}\n                index={index}\n                showCloseIcon\n                buyer={item?.buy}\n              />\n            );\n          })}\n      </div>\n    </>\n  );\n};\n\nexport default Userdeatailes;\n"]},"metadata":{},"sourceType":"module"}