{"ast":null,"code":"import _slicedToArray from\"/Users/computingyard/Documents/OLX-Mern-stack-main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./Add-products.scss\";import image from\"../../assets/images/photo.png\";import loader from\"../../assets/images/loader.webp\";import imagemain from\"../../assets/images/for.jpg\";import firebase from\"firebase\";import{useDispatch,useSelector}from\"react-redux\";import{useState}from\"react\";import back from\"../../assets/images/back.png\";import{Link,useHistory}from\"react-router-dom\";import{computeHeadingLevel}from\"@testing-library/dom\";import axios from\"axios\";import appsetting from\"../../appSetting/appsetting\";// import { Spinner } from \"react-bootstrap\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Productsdetailed=function Productsdetailed(){var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),category=_useState2[0],setcategory=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),condition=_useState4[0],setcondition=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),discription=_useState6[0],setdiscription=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),price=_useState8[0],setprice=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),photos=_useState10[0],setphotos=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),location=_useState12[0],setlocation=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),load=_useState14[0],setload=_useState14[1];var user=useSelector(function(state){return state.user;});var dispatch=useDispatch();var postAD=function postAD(){var productsdetailes={category:category,condition:condition,discription:discription,price:price,location:location,userName:user.name,userID:user._id};if(!user||photos.length!==5){alert(\"at least 5 images\");}else{setload(true);var temp=[];Object.values(photos).map(function(items){var ID=Date.now();var uploadimage=firebase.storage().ref().child(\"images/\"+ID);return uploadimage.put(items).then(function(){uploadimage.getDownloadURL().then(function(url){temp.push(url);if(temp.length===photos.length){productsdetailes.productImage=temp;// console.log(productsdetailes,\"hello bhai theak hai phar lena\")\nconsole.log(productsdetailes.productImage,\"photosurl\");axios.post(\"\".concat(appsetting.serverBaseUrl,\"/add/add-productdetailes\"),productsdetailes).then(function(succes){var _succes$data;alert(\"data is here\");console.log(succes.data,\"product's data\");dispatch({type:\"addProducts\",payload:succes===null||succes===void 0?void 0:(_succes$data=succes.data)===null||_succes$data===void 0?void 0:_succes$data.addDetailes});setload(false);history.push(\"/\");}).catch(function(err){alert(err);console.log(err,\"errorsss!!!!\");});}});});});}};return/*#__PURE__*/_jsx(_Fragment,{children:load?/*#__PURE__*/_jsx(\"div\",{className:\"duck\",children:/*#__PURE__*/_jsx(\"img\",{src:loader})}):/*#__PURE__*/_jsxs(\"div\",{className:\"contents\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"mainimage\",src:imagemain}),/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"POST YOUR AD\"}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"feilds\",children:/*#__PURE__*/_jsxs(\"label\",{for:\"category\",children:[\"Choose a category *\",/*#__PURE__*/_jsxs(\"select\",{id:\"category\",onChange:function onChange(e){return setcategory(e.target.value);},value:category,children:[/*#__PURE__*/_jsx(\"option\",{value:\"cloths\",children:\"cloths\"}),/*#__PURE__*/_jsx(\"option\",{value:\"sports\",children:\"sports\"}),/*#__PURE__*/_jsx(\"option\",{value:\"electronics\",children:\"electronics\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"feilds\",children:/*#__PURE__*/_jsxs(\"label\",{for:\"condition\",children:[\"Condition *\",/*#__PURE__*/_jsxs(\"select\",{id:\"condition\",onChange:function onChange(e){return setcondition(e.target.value);},value:condition,children:[/*#__PURE__*/_jsx(\"option\",{value:\"new\",children:\"new \"}),/*#__PURE__*/_jsx(\"option\",{value:\"used\",children:\"used\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"feilds\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Description *\",/*#__PURE__*/_jsx(\"textarea\",{cols:\"6\",rows:\"6\",className:\"padding\",onChange:function onChange(e){return setdiscription(e.target.value);},value:discription})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"feilds\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Price *\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Price of your product\",className:\"padding\",onChange:function onChange(e){return setprice(e.target.value);},value:price})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"feilds\",children:[\"Upload product *\",/*#__PURE__*/_jsxs(\"label\",{id:\"photo\",children:[/*#__PURE__*/_jsx(\"img\",{src:image,className:\"images\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",multiple:true,className:\"hide\",onChange:function onChange(e){return setphotos(e.target.files);}})]}),/*#__PURE__*/_jsx(\"small\",{children:\"* At least 5 photos*\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"feilds\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Conform your location *\",/*#__PURE__*/_jsx(\"textarea\",{cols:\"4\",rows:\"4\",className:\"padding\",onChange:function onChange(e){return setlocation(e.target.value);},value:location})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"button\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){postAD();},children:[\"Post now\",\" \"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"go-back\",children:/*#__PURE__*/_jsxs(Link,{to:\"/\",children:[/*#__PURE__*/_jsx(\"img\",{src:back}),/*#__PURE__*/_jsx(\"b\",{children:\" Go to back \"})]})})]})]})});};export default Productsdetailed;","map":{"version":3,"sources":["/Users/computingyard/Documents/OLX-Mern-stack-main/frontend/src/components/Add-products/products-detailed.js"],"names":["image","loader","imagemain","firebase","useDispatch","useSelector","useState","back","Link","useHistory","computeHeadingLevel","axios","appsetting","Productsdetailed","history","category","setcategory","condition","setcondition","discription","setdiscription","price","setprice","photos","setphotos","location","setlocation","load","setload","user","state","dispatch","postAD","productsdetailes","userName","name","userID","_id","length","alert","temp","Object","values","map","items","ID","Date","now","uploadimage","storage","ref","child","put","then","getDownloadURL","url","push","productImage","console","log","post","serverBaseUrl","succes","data","type","payload","addDetailes","catch","err","e","target","value","files"],"mappings":"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","sourcesContent":["import \"./Add-products.scss\";\nimport image from \"../../assets/images/photo.png\";\nimport loader from \"../../assets/images/loader.webp\";\nimport imagemain from \"../../assets/images/for.jpg\";\nimport firebase from \"firebase\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useState } from \"react\";\n\nimport back from \"../../assets/images/back.png\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { computeHeadingLevel } from \"@testing-library/dom\";\nimport axios from \"axios\";\nimport appsetting from \"../../appSetting/appsetting\";\n// import { Spinner } from \"react-bootstrap\";\n\nlet Productsdetailed = () => {\n  const history = useHistory();\n  let [category, setcategory] = useState(\"\");\n  let [condition, setcondition] = useState(\"\");\n  let [discription, setdiscription] = useState(\"\");\n  let [price, setprice] = useState(\"\");\n  let [photos, setphotos] = useState(\"\");\n  let [location, setlocation] = useState(\"\");\n  let [load, setload] = useState(false);\n  let user = useSelector((state) => state.user);\n  let dispatch = useDispatch()\n  let postAD = () => {\n    var productsdetailes = {\n      category,\n      condition,\n      discription,\n      price,\n      location,\n      userName: user.name,\n      userID: user._id,\n    };\n    if (!user || photos.length !== 5) {\n      alert(\"at least 5 images\");\n    } else {\n      setload(true);\n      let temp = [];\n      Object.values(photos).map((items) => {\n        let ID = Date.now();\n        let uploadimage = firebase\n          .storage()\n          .ref()\n          .child(\"images/\" + ID);\n        return uploadimage.put(items).then(() => {\n          uploadimage.getDownloadURL().then((url) => {\n            temp.push(url);\n            if (temp.length === photos.length) {\n              productsdetailes.productImage = temp;\n              // console.log(productsdetailes,\"hello bhai theak hai phar lena\")\n\n\n              console.log(productsdetailes.productImage,\"photosurl\")\n              axios\n                .post(\n                  `${appsetting.serverBaseUrl}/add/add-productdetailes`,\n                  productsdetailes\n                )\n                .then((succes) => {\n                  alert(\"data is here\");\n                  console.log(succes.data, \"product's data\");\n                  dispatch({\n                    type: \"addProducts\",\n                    payload: succes?.data?.addDetailes,\n                  });\n                  setload(false);\n                  history.push(\"/\");\n                  \n                })\n\n                .catch((err) => {\n                  alert(err);\n                  console.log(err, \"errorsss!!!!\");\n                });\n            }\n          });\n        });\n      });\n    }\n  };\n\n  return (\n    <>\n      {load ? (\n        <div className=\"duck\">\n          {/* <Spinner animation=\"border\" role=\"status\" ></Spinner> */}\n          <img src={loader} />\n        </div>\n      ) : (\n        <div className=\"contents\">\n          <img className=\"mainimage\" src={imagemain} />\n\n          <div className=\"header\">\n            <h1>POST YOUR AD</h1>{\" \"}\n          </div>\n          <div className=\"wrapper\">\n            <div className=\"feilds\">\n              <label for=\"category\">\n                Choose a category *\n                <select\n                  id=\"category\"\n                  onChange={(e) => setcategory(e.target.value)}\n                  value={category}\n                >\n                  <option value=\"cloths\">cloths</option>\n                  <option value=\"sports\">sports</option>\n                  <option value=\"electronics\">electronics</option>\n                </select>\n              </label>\n            </div>\n            <div className=\"feilds\">\n              <label for=\"condition\">\n                Condition *\n                <select\n                  id=\"condition\"\n                  onChange={(e) => setcondition(e.target.value)}\n                  value={condition}\n                >\n                  <option value=\"new\">new </option>\n                  <option value=\"used\">used</option>\n                </select>\n              </label>\n            </div>\n            <div className=\"feilds\">\n              <label>\n                Description *\n                <textarea\n                  cols=\"6\"\n                  rows=\"6\"\n                  className=\"padding\"\n                  onChange={(e) => setdiscription(e.target.value)}\n                  value={discription}\n                />\n              </label>\n            </div>\n            <div className=\"feilds\">\n              <label>\n                Price *\n                <input\n                  type=\"text\"\n                  placeholder=\"Price of your product\"\n                  className=\"padding\"\n                  onChange={(e) => setprice(e.target.value)}\n                  value={price}\n                />\n              </label>\n            </div>\n            <div className=\"feilds\">\n              Upload product *\n              <label id=\"photo\">\n                <img src={image} className=\"images\" />\n                <input\n                  type=\"file\"\n                  multiple\n                  className=\"hide\"\n                  onChange={(e) => setphotos(e.target.files)}\n                />\n              </label>\n              <small>* At least 5 photos*</small>\n            </div>\n\n            <div className=\"feilds\">\n              <label>\n                Conform your location *\n                <textarea\n                  cols=\"4\"\n                  rows=\"4\"\n                  className=\"padding\"\n                  onChange={(e) => setlocation(e.target.value)}\n                  value={location}\n                />\n              </label>\n            </div>\n            <div className=\"button\">\n              <button\n                onClick={() => {\n                  postAD();\n                }}\n              >\n                Post now{\" \"}\n              </button>\n            </div>\n            <div className=\"go-back\">\n              <Link to=\"/\">\n                <img src={back}></img>\n                <b> Go to back </b>\n              </Link>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Productsdetailed;\n"]},"metadata":{},"sourceType":"module"}